function _toArray(t){return _arrayWithHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableRest()}function _templateObject13(){var t=_taggedTemplateLiteral([""," = 0"]);return _templateObject13=function(){return t},t}function _templateObject12(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject12=function(){return t},t}function _templateObject11(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject11=function(){return t},t}function _templateObject10(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject10=function(){return t},t}function _templateObject9(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject9=function(){return t},t}function _templateObject8(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject8=function(){return t},t}function _templateObject7(){var t=_taggedTemplateLiteral([""," = ",""]);return _templateObject7=function(){return t},t}function _templateObject6(){var t=_taggedTemplateLiteral([""," = "," + "," % ","\n      - "," % "," % ("," - ",")"]);return _templateObject6=function(){return t},t}function _templateObject5(){var t=_taggedTemplateLiteral([""," * max(0, ("," - ",")/",")"]);return _templateObject5=function(){return t},t}function _templateObject4(){var t=_taggedTemplateLiteral([""," = "," -  "," % "," % ("," - ",")"]);return _templateObject4=function(){return t},t}function _templateObject3(){var t=_taggedTemplateLiteral([""," = "," + ","\n      * ("," - 2 * "," + ",")"]);return _templateObject3=function(){return t},t}function _templateObject2(){var t=_taggedTemplateLiteral([""," = "," + ","\n      * ("," - 2 * "," + ",")"]);return _templateObject2=function(){return t},t}function _templateObject(){var t=_taggedTemplateLiteral(["abs(",")"]);return _templateObject=function(){return t},t}function _taggedTemplateLiteral(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _createForOfIteratorHelper(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=_unsupportedIterableToArray(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a,o=!0,i=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return o=t.done,t},e:function(t){i=!0,a=t},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,(function(e){return t[e]}).bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="WZ91")}({HCFj:function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.Operator||(e.Operator={})).POWER="^",n.DIVISION="/",n.TIMES="*",n.ELEM_W_TIMES="%",n.MINUS="-",n.PLUS="+"},"U/uP":function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a,o,i=r("WrVD"),u=r("HCFj"),l=r("YMTH"),c=r("f2g5");function s(t,r){var n=e.isBuildInMathFn(t),a=e.isBuildInMathFn(r);return n&&a?r.length-t.length:n?-1:a?1:Object.keys(u.Operator).findIndex((function(e){return e===t}))-Object.keys(u.Operator).findIndex((function(t){return t===r}))}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=t.findIndex((function(r,n){return!(r!==u.Operator.MINUS||e.is_number(t[n-1])||e.is_matrix(t[n-1])||t[n-1]===o.RIGHT)}));return r>-1?[].concat(_toConsumableArray(t.slice(0,r)),[o.LEFT,-1,o.RIGHT,u.Operator.TIMES],_toConsumableArray(f(t.slice(r+1)))):t}function p(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.all_operator_symbols;return d(t,r[0]).map((function(t){return r.length>1&&!e.all_operator_symbols.includes(t)?p(t,r.filter((function(t,e){return e>0}))):[h(t)]})).reduce((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[])}function h(t){var r=parseFloat(t);if(e.all_operator_symbols.includes(t))return t;if(!Number.isNaN(r))return r;if(n.EQ===t)return t;throw new Error("Cannot parse expression ".concat(t," as ExpressionPart."))}function d(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,r=t.indexOf(e);if(-1===r)return[t];var n=r+e.length-1;return[].concat(_toConsumableArray(r>0?[t.substring(0,r)]:[]),[e],_toConsumableArray(n<t.length-1?d(t.substring(n+1),e):[]))}function _(t){for(t=_toConsumableArray(t);t.includes(o.LEFT);){var e=t.findIndex((function(t){return t===o.LEFT})),r=m(t,e),n=_(t.slice(e+1,r));t=[].concat(_toConsumableArray(t.slice(0,e)),[n],_toConsumableArray(t.slice(r+1)))}var a=y(t).map((function(t){return v(t)})).map((function(t){return t[0]}));return a.length>1?a:a[0]}function y(t){var e=t.findIndex((function(t){return t===a.COMMA}));return e<0?[t]:[t.slice(0,e)].concat(_toConsumableArray(y(t.slice(e+1))))}function m(t,e){var r,n=1,a=_createForOfIteratorHelper(t.slice(e+1).entries());try{for(a.s();!(r=a.n()).done;){var i=_slicedToArray(r.value,2),u=i[0],l=i[1];if(l===o.RIGHT){if(1===n)return e+1+u;n-=1}else l===o.LEFT&&(n+=1)}}catch(c){a.e(c)}finally{a.f()}throw new Error("miss-matching parenthesis in expression")}function v(t){return t=_toConsumableArray(t),e.all_operator_symbols.sort(s).forEach((function(r){for(;t.includes(r);){var n=t.findIndex((function(t){return r===t}));if(e.isOperator(r)){var a=n-1,o=n+1,i=b(r,t[a],t[o]);t=[].concat(_toConsumableArray(t.slice(0,a)),[i],_toConsumableArray(t.slice(o+1)))}else if(e.isBuildInMathFn(r)){var u=n+1,l=g(r,t[u]);t=[].concat(_toConsumableArray(t.slice(0,n)),[l],_toConsumableArray(t.slice(u+1)))}}})),t}function b(t,e,r){var n="number"==typeof e,a="number"==typeof r;if(n&&a)switch(t){case u.Operator.PLUS:return e+r;case u.Operator.MINUS:return e-r;case u.Operator.POWER:return Math.pow(e,r);case u.Operator.DIVISION:return e/r;case u.Operator.ELEM_W_TIMES:case u.Operator.TIMES:return e*r;default:throw new Error("Not supported operator ".concat(t," between numbers."))}var o=function(t,e){return c.mat.apply(c,_toConsumableArray(e.shape())).fill(t)};return e=n?o(e,r):e,r=a?o(r,e):r,!n&&!a||t!==u.Operator.TIMES&&t!==u.Operator.ELEM_W_TIMES?e[t](r):e.apply((function(t,e,n){return t*r.get(e,n)}))}function g(t,e){if(Array.isArray(e)){var r=e.find((function(t){return t instanceof i.Matrix}));if(r){var n=e.map((function(t){return"number"==typeof t?c.mat.apply(c,_toConsumableArray(r.shape())).fill(t):t}));return O(t,n)}return Math[""+t].apply(Math,_toConsumableArray(e))}return"number"==typeof e?Math[""+t](e):e.apply((function(e){return Math[""+t](e)}))}function O(t,e){var r,n=c.mat.apply(c,_toConsumableArray(e[0].shape())),a=_createForOfIteratorHelper(n.iter());try{var o=function(){var a=r.value,o=a.row,i=a.col,u=Math[""+t].apply(Math,_toConsumableArray(e.map((function(t){return t.get(o,i)}))));n.set(o,i,u)};for(a.s();!(r=a.n()).done;)o()}catch(i){a.e(i)}finally{a.f()}return n}!function(t){t.EQ="="}(n=e.Assignment||(e.Assignment={})),function(t){t.COMMA=","}(a=e.Separator||(e.Separator={})),function(t){t.LEFT="(",t.RIGHT=")"}(o=e.Bracket||(e.Bracket={})),e.all_operator_symbols=[].concat(_toConsumableArray(Object.values(n)),_toConsumableArray(Object.values(o)),_toConsumableArray(Object.values(a)),_toConsumableArray(Object.values(u.Operator)),_toConsumableArray(Object.values(l.BuildInMathFn))).sort((function(t,e){return e.length-t.length})),e.operator_map=Object.values(u.Operator).reduce((function(t,e){return Object.assign(Object.assign({},t),_defineProperty({},e,e))}),{}),e.isOperator=function(t){return!!e.operator_map[t]},e.buildInMathFn_map=Object.values(l.BuildInMathFn).reduce((function(t,e){return Object.assign(Object.assign({},t),_defineProperty({},e,e))}),{}),e.isBuildInMathFn=function(t){return!!e.buildInMathFn_map[t]},e.is_number=function(t){return"number"==typeof t},e.is_matrix=function(t){return t instanceof i.Matrix},e.operator_precedence=s,e.calc=function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),a=1;a<e;a++)r[a-1]=arguments[a];try{var o=t.map((function(t){return t.replace(/\s/g,"")})).map((function(t,e){var n=void 0!==r[e]?[r[e]]:[];return""!==t?[].concat(_toConsumableArray(p(t)),n):[].concat(n)})).reduce((function(t,e){return[].concat(_toConsumableArray(t),_toConsumableArray(e))}),[]);if((o=f(o))[1]!==n.EQ)return o.length>1?_(o):o[0]instanceof i.Matrix?o[0].clone():o[0];var u=_(o.slice(2));!function(t,e){if("number"==typeof e)t.fill(e);else{var r,n=_createForOfIteratorHelper(e.iter());try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.value,i=a.row,u=a.col;t.set(i,u,o)}}catch(l){n.e(l)}finally{n.f()}}}(o[0],u)}catch(l){throw new Error(l)}},e.transformSignOperator=f,e.splitOperators=p,e.parseAsExpressionPart=h,e.splitOperator=d,e.compute=_,e.split_components=y,e.findClosingBracket=m,e.combine=v,e.evaluateOp=b,e.evaluateFn=g,e.evaluateMultiArgFn=O},WZ91:function(t,e,r){"use strict";r.r(e);var n=r("YVAP"),a=r("lYyf"),o=function(){function t(e){_classCallCheck(this,t),this.L=1,this.g=9.81,this.duration=300,this.report_frequ=1,this.v_max=2,this.params=e,this.delta_x=this.L/this.params.n_grid,this.alpha=this.params.lambda/(this.params.rho*this.params.c_p),this.delta_t=this.calc_min_delta_t()}return _createClass(t,[{key:"simulate",value:function(){var t=this;console.log("Simulation starting with params:"),console.log(JSON.stringify(this.params));for(var e,r=Object(n.mat)(this.params.n_grid-2,this.params.n_grid-2).wrap(1).fill(this.params.T_c),o=Object(n.zeros)(this.params.n_grid,this.params.n_grid),i=Object(n.zeros)(this.params.n_grid,this.params.n_grid),u=0;u<=this.duration;u+=this.delta_t)Object(a.op)((function(t){return t})).comp((function(e){return t.adjust_boundary(e)})).comp((function(e){return t.time_adaptive_op(e)})).comp((function(e){return t.params.includeBuoyancy?t.mom_convection_y_op(e):e})).comp((function(e){return t.heat_convection_y_op(e)})).comp((function(e){return t.diffusion_y_op(e)})).comp((function(e){return t.diffusion_x_op(e)})).comp((function(e){return t.adjust_boundary(e)}))({T:r,v_x:i,v_y:o}),(!e||u-e>=this.report_frequ)&&(postMessage({T:r.rawData(),t:u,delta_t:this.delta_t}),e=u)}},{key:"time_adaptive_op",value:function(t){return this.v_max=n.calc(_templateObject(),t.v_y).max(),this.delta_t=this.calc_min_delta_t(),t}},{key:"calc_min_delta_t",value:function(){return Math.min(1,1/4*Math.pow(this.delta_x,2)/this.alpha,this.delta_x/this.v_max)}},{key:"diffusion_x_op",value:function(t){var e=t.T;return e=e.shrink(1),n.calc(_templateObject2(),e,e,this.alpha*this.delta_t/Math.pow(this.delta_x,2),e.shift_x(-1),e,e.shift_x(1)),t}},{key:"diffusion_y_op",value:function(t){var e=t.T;return e=e.shrink(1),n.calc(_templateObject3(),e,e,this.alpha*this.delta_t/Math.pow(this.delta_x,2),e.shift_y(-1),e,e.shift_y(1)),t}},{key:"heat_convection_y_op",value:function(t){var e=t.T,r=t.v_y;return e=e.shrink(1),r=r.shrink(1),n.calc(_templateObject4(),e,e,r,this.delta_t/this.delta_x,e,e.shift_y(-1)),t}},{key:"mom_convection_y_op",value:function(t){var e=t.T,r=t.v_y,a=(e=e.shrink(1)).shift_y(1),o=n.calc(_templateObject5(),this.g,e,a,a);return r=r.shrink(1),n.calc(_templateObject6(),r,r,this.delta_t,o,r,this.delta_t/this.delta_x,r,r.shift_y(-1)),t}},{key:"adjust_boundary",value:function(t){var e=t.T,r=t.v_y,a=_slicedToArray(e.shape(),2),o=a[0],i=a[1];return e.filter((function(t){return 0===t.row})).fill(this.params.T_h),n.calc(_templateObject7(),e.row(o-1),e.row(o-2)),n.calc(_templateObject8(),e.col(0),e.col(1)),n.calc(_templateObject9(),e.col(i-1),e.col(i-2)),n.calc(_templateObject10(),r.row(o-1),r.row(o-2)),n.calc(_templateObject11(),r.col(0),r.col(1)),n.calc(_templateObject12(),r.col(i-1),r.col(i-2)),n.calc(_templateObject13(),r.row(0)),t}}]),t}();addEventListener("message",(function(t){var e=t.data;new o(e).simulate()}))},WrVD:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("HCFj"),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,t),this.rows=e,this.cols=r,this.initOperators(),this.data=[]}return _createClass(t,[{key:"rawData",value:function(){return this.data}},{key:"shape",value:function(){return[this.rows,this.cols]}},{key:"clone",value:function(){var e,r=new t(this.rows,this.cols),n=_createForOfIteratorHelper(this.iter());try{for(n.s();!(e=n.n()).done;){var a=e.value,o=a.value,i=a.row,u=a.col;null!=o&&r.set(i,u,o)}}catch(l){n.e(l)}finally{n.f()}return r}},{key:"slice",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var a=r[0],o=r[1],i=r[2],u=r[3],l=[].concat(_toConsumableArray(this.transToDataCoords(a,o)),_toConsumableArray(this.transToDataCoords(i,u)));a=l[0],o=l[1];var c=new t((i=l[2])-a+1,(u=l[3])-o+1);return c.data=this.data,c.coordFilter=this.coordFilter,c.sliceParams=[a,o,i,u],c}},{key:"col",value:function(t){return this.slice(0,t,this.rows-1,t)}},{key:"row",value:function(t){return this.slice(t,0,t,this.cols-1)}},{key:"filter",value:function(e){var r=new t(this.rows,this.cols);r.data=this.data,r.coordFilter=[];var n,a=_createForOfIteratorHelper(this.iter());try{for(a.s();!(n=a.n()).done;){var o=n.value,i=o.row,u=o.col,l=o.value,c=_slicedToArray(this.transToDataCoords(i,u),2),s=c[0],f=c[1];r.coordFilter[s]||(r.coordFilter[s]=[]),r.coordFilter[s][f]=e({row:i,col:u,value:l})}}catch(p){a.e(p)}finally{a.f()}return r}},{key:"get",value:function(t,e){var r,n,a;return this.checkIndexes(t,e),t=(r=_slicedToArray(this.transToDataCoords(t,e),2))[0],e=r[1],this.checkFilterCoordinates(t,e),null===(a=null===(n=this.data)||void 0===n?void 0:n[t])||void 0===a?void 0:a[e]}},{key:"fill",value:function(t){var e,r=_createForOfIteratorHelper(this.iter());try{for(r.s();!(e=r.n()).done;){var n=e.value,a=n.row,o=n.col;this.set(a,o,t)}}catch(i){r.e(i)}finally{r.f()}return this}},{key:"shrink",value:function(t){return this.slice(t,t,this.rows-1-t,this.cols-1-t)}},{key:"shift_x",value:function(t){return this.slice(0,t,this.rows-1,this.cols-1+t)}},{key:"shift_y",value:function(t){return this.slice(t,0,this.rows-1+t,this.cols-1)}},{key:"wrap",value:function(t){for(var e=this.clone(),r=1;r<=t;r++)e.addRow(0),e.addRow(e.rows),e.addColumn(0),e.addColumn(e.cols);return e}},{key:"addRow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.coordFilter||this.sliceParams)throw new Error("Not supported for sliced or filtered matrixes.");this.rows=this.rows+1,this.data.splice(t,0,e)}},{key:"addColumn",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.coordFilter||this.sliceParams)throw new Error("Not supported for sliced or filtered matrixes.");this.cols=this.cols+1;for(var n=0;n<this.data.length;n++)null===(e=this.data[n])||void 0===e||e.splice(t,0,r[n])}},{key:"set",value:function(t,e,r){var n;this.checkIndexes(t,e),this.data||(this.data=[]),t=(n=_slicedToArray(this.transToDataCoords(t,e),2))[0],e=n[1],this.checkFilterCoordinates(t,e),this.data[t]||(this.data[t]=[]),this.data[t][e]=r}},{key:"iter",value:function(){return regeneratorRuntime.mark((function t(){var e,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.rows)){t.next=14;break}r=0;case 3:if(!(r<this.cols)){t.next=11;break}if(t.t0=this.isFilteredCoord(e,r),!t.t0){t.next=8;break}return t.next=8,{value:this.get(e,r),row:e,col:r};case 8:r++,t.next=3;break;case 11:e++,t.next=1;break;case 14:case"end":return t.stop()}}),t,this)})).bind(this)()}},{key:"print",value:function(){var t=this;console.log("["),this.data.filter((function(e,r){return!t.sliceParams||r>=t.sliceParams[0]&&r<=t.sliceParams[2]})).forEach((function(e){var r=e.filter((function(e,r){return!t.sliceParams||r>=t.sliceParams[1]&&r<=t.sliceParams[3]}));console.log("[".concat(r,"],"))})),console.log("]")}},{key:"plus",value:function(t){return this.apply((function(e,r,n){return e+t.get(r,n)}))}},{key:"minus",value:function(t){return this.apply((function(e,r,n){return e-t.get(r,n)}))}},{key:"divide",value:function(t){return this.apply((function(e,r,n){return e/t.get(r,n)}))}},{key:"power",value:function(t){return this.apply((function(e,r,n){return Math.pow(e,t.get(r,n))}))}},{key:"elem_w_times",value:function(t){return this.apply((function(e,r,n){return e*t.get(r,n)}))}},{key:"times",value:function(e){if(this.coordFilter)throw new Error("Matrix multiplication not supported for filtered matrixes.");var r,n=new t(this.rows,e.cols),a=_createForOfIteratorHelper(n.iter());try{for(a.s();!(r=a.n()).done;){for(var o=r.value,i=o.row,u=o.col,l=0,c=0;c<this.cols;c++)l+=this.get(i,c)*e.get(c,u);n.set(i,u,l)}}catch(s){a.e(s)}finally{a.f()}return n}},{key:"mod",value:function(t){return this.apply((function(e,r,n){return e%t.get(r,n)}))}},{key:"max",value:function(){return Math.max.apply(Math,_toConsumableArray(_toConsumableArray(this.iter()).map((function(t){return t.value}))))}},{key:"min",value:function(){return Math.min.apply(Math,_toConsumableArray(_toConsumableArray(this.iter()).map((function(t){return t.value}))))}},{key:"apply",value:function(t){var e=this.clone();e.coordFilter=this.coordFilter;var r,n=_createForOfIteratorHelper(this.iter());try{for(n.s();!(r=n.n()).done;){var a=r.value,o=a.value,i=a.row,u=a.col;e.set(i,u,t(o,i,u))}}catch(l){n.e(l)}finally{n.f()}return e}},{key:"checkIndexes",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=e[0],a=e[1];if(n>this.rows||a>this.cols||n<0||a<0)throw new Error("Index out of bounds.")}},{key:"initOperators",value:function(){var t=this;Object.values(n.Operator).forEach((function(e){t[e]=t.createPartialFn(e)}))}},{key:"createPartialFn",value:function(t){var e,r=this;return(e={},_defineProperty(e,n.Operator.POWER,(function(t){return r.power(t)})),_defineProperty(e,n.Operator.TIMES,(function(t){return r.times(t)})),_defineProperty(e,n.Operator.ELEM_W_TIMES,(function(t){return r.elem_w_times(t)})),_defineProperty(e,n.Operator.DIVISION,(function(t){return r.divide(t)})),_defineProperty(e,n.Operator.PLUS,(function(t){return r.plus(t)})),_defineProperty(e,n.Operator.MINUS,(function(t){return r.minus(t)})),e)[t]}},{key:"transToDataCoords",value:function(t,e){return[this.sliceParams?this.sliceParams[0]+t:t,this.sliceParams?this.sliceParams[1]+e:e]}},{key:"checkFilterCoordinates",value:function(t,e){if(this.coordFilter&&!this.coordFilter[t][e])throw new Error("Coordinates ".concat(t,", ").concat(e," are not in filtered range."))}},{key:"isFilteredCoord",value:function(t,e){var r;return t=(r=_slicedToArray(this.transToDataCoords(t,e),2))[0],e=r[1],!this.coordFilter||this.coordFilter[t][e]}}]),t}();e.Matrix=a},YMTH:function(t,e,r){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),(n=e.BuildInMathFn||(e.BuildInMathFn={})).abs="abs",n.acos="acos",n.acosh="acosh",n.asin="asin",n.asinh="asinh",n.atan="atan",n.atanh="atanh",n.ceil="ceil",n.cbrt="cbrt",n.cos="cos",n.cosh="cosh",n.exp="exp",n.floor="floor",n.log="log",n.log1p="log1p",n.log2="log2",n.log10="log10",n.max="max",n.min="min",n.pow="pow",n.round="round",n.sign="sign",n.sin="sin",n.sinh="sinh",n.sqrt="sqrt",n.tan="tan",n.tanh="tanh",n.trunc="trunc"},YVAP:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("U/uP");e.calc=n.calc;var a=r("f2g5");e.mat=a.mat,e.zeros=a.zeros;var o=r("WrVD");e.Matrix=o.Matrix},f2g5:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("WrVD");function a(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(e[0]instanceof n.Matrix)return e[0].clone();if(Array.isArray(e[0])){var a=e[0].length,o=e[0].find((function(t){return t&&Array.isArray(t)})),i=new n.Matrix(a,o?o.length:1);return e[0].forEach((function(t,e){return t&&t.forEach((function(t,r){return t&&i.set(e,r,t)}))})),i}var u=e[0],l=e[1];return new n.Matrix(u,l)}e.mat=a,e.zeros=function(t,e){var r,n=a(t,e),o=_createForOfIteratorHelper(n.iter());try{for(o.s();!(r=o.n()).done;){var i=r.value,u=i.row,l=i.col;n.set(u,l,0)}}catch(c){o.e(c)}finally{o.f()}return n},e.randu=function(t,e){var r,n=a(t,e),o=_createForOfIteratorHelper(n.iter());try{for(o.s();!(r=o.n()).done;){var i=r.value,u=i.row,l=i.col;n.set(u,l,Math.random())}}catch(c){o.e(c)}finally{o.f()}return n}},lYyf:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("w9vU");Object.defineProperty(e,"op",{enumerable:!0,get:function(){return n.op}})},w9vU:function(t,e,r){"use strict";var n;function a(t){var e=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.apply(void 0,[e].concat(n))};return e[n.comp]=function(e){return a((function(r){return t(e(r))}))},e[n.pipe]=function(e){return a((function(r){return e(t(r))}))},e[n.partial]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return a((function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return t.apply(void 0,_toConsumableArray(function(t,e){return t.includes("_")?function(t,e){e=_toConsumableArray(e);for(var r=0,n=Object.entries(t);r<n.length;r++){var a=_slicedToArray(n[r],2),o=a[0];"_"===a[1]&&(t[+o]=e.shift())}return t}(t,e):[].concat(_toConsumableArray(t),_toConsumableArray(e))}(r,n)))}))},e[n.mem]=function(){return a((e=t,r=new Map,function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var o=function t(r,a){var o=_toArray(a),i=o[0],u=o.slice(1);r.has(i)||r.set(i,new Map);var l=r.get(i);if(u.length)t(l,u);else if(!l.has(null)){var c=n[0],s=n.slice(1);l.set(null,e.apply(void 0,[c].concat(_toConsumableArray(s))))}return l.get(null)};return o(r,n)}));var e,r},e}Object.defineProperty(e,"__esModule",{value:!0}),e.id=e.cons=e.op=e._=void 0,function(t){t.comp="comp",t.pipe="pipe",t.partial="partial",t.mem="mem"}(n||(n={})),e._="_",e.op=a,e.cons=function(t){return a((function(e){return t}))},e.id=function(){return a((function(t){return t}))}}});